{% extends "admin/base_site.html" %}
{% block content %}
  <style>
    /* General Styling */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }

    /* Title and Header Styling */
    h1, h2 {
      font-weight: bold;
      color: #2C3E50;
    }

    /* Table Styling */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: left;
    }

    th {
      background-color: #f2f2f2;
      font-weight: bold;
    }

    /* Data Highlights */
    .highlight {
      font-weight: bold;
      color: #27AE60;
    }

    /* Section Styling */
    .section {
      margin-bottom: 40px;
    }

    /* Date Styling */
    .date-range {
      color: #555;
      font-style: italic;
    }
  </style>

  <div class="report">

    {% if operator %}
      <!-- Operator Name and Report Title -->
      <h1>Report for {{ operator.name }}</h1>

      <!-- Report Period -->
      <p class="date-range">Report Period: {{ start_date }} to {{ end_date }}</p>

      <!-- Revenue Section -->
      <div class="section">
        <h2>Revenue Summary</h2>
        <table>
          <tr>
            <th>Total Revenue</th>
            <td class="highlight">${{ total_revenue|floatformat:2 }}</td>
          </tr>
          <tr>
            <th>Revenue After Commission</th>
            <td class="highlight">${{ total_revenue_after_commission|floatformat:2 }}</td>
          </tr>
          <tr>
            <th>Average Ticket Price</th>
            <td class="highlight">${{ average_ticket_price|floatformat:2 }}</td>
          </tr>
          <tr>
            <th>Total Trips</th>
            <td>{{ total_trips }}</td>
          </tr>
          <tr>
            <th>Number of Cancellations</th>
            <td>{{ cancellations }}</td>
          </tr>
        </table>
      </div>

      <!-- Seats Section -->
      <div class="section">
        <h2>Seat Summary</h2>
        <table>
          <tr>
            <th>Seats Booked</th>
            <td>{{ seats_booked }}</td>
          </tr>
          <tr>
            <th>Seats Available</th>
            <td>{{ seats_unbooked }}</td>
          </tr>
        </table>
      </div>

    {% else %}
      <!-- General Report When No Operator is Selected -->
      <h1>Bus Operator Report</h1>

      <!-- Report Period -->
      <p class="date-range">Report Period: {{ start_date }} to {{ end_date }}</p>

      <!-- Revenue Section -->
      <div class="section">
        <h2>Overall Revenue Summary</h2>
        <table>
          <tr>
            <th>Total Revenue</th>
            <td class="highlight">${{ total_revenue|floatformat:2 }}</td>
          </tr>
          <tr>
            <th>Revenue After Commission</th>
            <td class="highlight">${{ total_revenue_after_commission|floatformat:2}}</td>
          </tr>
          <tr>
            <th>Average Ticket Price</th>
            <td class="highlight">${{ average_ticket_price|floatformat:2 }}</td>
          </tr>
          <tr>
            <th>Total Trips</th>
            <td>{{ total_trips }}</td>
          </tr>
          <tr>
            <th>Number of Cancellations</th>
            <td>{{ cancellations }}</td>
          </tr>
        </table>
      </div>
      
      <!-- Seats Section -->
      <div class="section">
        <h2>Overall Seat Summary</h2>
        <table>
          <tr>
            <th>Total Seats Booked</th>
            <td>{{ seats_booked }}</td>
          </tr>
          <tr>
            <th>Total Seats Available</th>
            <td>{{ seats_unbooked }}</td>
          </tr>
        </table>
      </div>
      
    {% endif %}

  </div>
{% endblock %}
